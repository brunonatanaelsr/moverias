{% extends 'dashboard_base.html' %}

{% block title %}Dashboard - Move Marias{% endblock %}

{% block content %}
<div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">Dashboard</h1>
    <p class="mt-2 text-sm text-gray-600">Bem-vinda ao sistema Move Marias</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    <!-- Card Total BeneficiÃ¡rias -->
    <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="p-5">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <div class="w-8 h-8 bg-purple-move rounded-full flex items-center justify-center">
                        <span class="text-white font-bold">ðŸ‘¥</span>
                    </div>
                </div>
                <div class="ml-5 w-0 flex-1">
                    <dl>
                        <dt class="text-sm font-medium text-gray-500 truncate">Total de BeneficiÃ¡rias</dt>
                        <dd class="text-lg font-medium text-gray-900">{{ total_beneficiaries }}</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <!-- Card Anamneses -->
    <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="p-5">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <div class="w-8 h-8 bg-pink-move rounded-full flex items-center justify-center">
                        <span class="text-white font-bold">ðŸ“‹</span>
                    </div>
                </div>
                <div class="ml-5 w-0 flex-1">
                    <dl>
                        <dt class="text-sm font-medium text-gray-500 truncate">Anamneses Sociais</dt>
                        <dd class="text-lg font-medium text-gray-900">-</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <!-- Card Projetos Ativos -->
    <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="p-5">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold">ðŸŽ¯</span>
                    </div>
                </div>
                <div class="ml-5 w-0 flex-1">
                    <dl>
                        <dt class="text-sm font-medium text-gray-500 truncate">Projetos Ativos</dt>
                        <dd class="text-lg font-medium text-gray-900">-</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <!-- Card Total de Oficinas -->
    <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="p-5">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold">ðŸŽ¨</span>
                    </div>
                </div>
                <div class="ml-5 w-0 flex-1">
                    <dl>
                        <dt class="text-sm font-medium text-gray-500 truncate">Total de Oficinas</dt>
                        <dd class="text-lg font-medium text-gray-900">{{ total_workshops }}</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <!-- Card Oficinas Ativas -->
    <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="p-5">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <div class="w-8 h-8 bg-indigo-500 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold">âš¡</span>
                    </div>
                </div>
                <div class="ml-5 w-0 flex-1">
                    <dl>
                        <dt class="text-sm font-medium text-gray-500 truncate">Oficinas Ativas</dt>
                        <dd class="text-lg font-medium text-gray-900">{{ active_workshops }}</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <!-- Card EvoluÃ§Ãµes -->
    <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="p-5">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold">ðŸ“ˆ</span>
                    </div>
                </div>
                <div class="ml-5 w-0 flex-1">
                    <dl>
                        <dt class="text-sm font-medium text-gray-500 truncate">Registros de EvoluÃ§Ã£o</dt>
                        <dd class="text-lg font-medium text-gray-900">-</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- BeneficiÃ¡rias Recentes -->
    <div class="bg-white shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">BeneficiÃ¡rias Recentes</h3>
            {% if recent_beneficiaries %}
                <div class="space-y-3">
                    {% for beneficiary in recent_beneficiaries %}
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div>
                            <p class="text-sm font-medium text-gray-900">{{ beneficiary.full_name }}</p>
                            <p class="text-xs text-gray-500">{{ beneficiary.neighbourhood }} â€¢ {{ beneficiary.created_at|date:"d/m/Y" }}</p>
                        </div>
                        <a href="{% url 'dashboard:beneficiary_detail' beneficiary.pk %}" 
                           class="text-purple-move hover:text-purple-700 text-sm font-medium"
                           hx-get="{% url 'dashboard:beneficiary_detail' beneficiary.pk %}"
                           hx-target="#modal">
                            Ver
                        </a>
                    </div>
                    {% endfor %}
                </div>
                <div class="mt-4">
                    <a href="{% url 'dashboard:beneficiaries_list' %}" class="text-sm font-medium text-purple-move hover:text-purple-700">
                        Ver todas as beneficiÃ¡rias â†’
                    </a>
                </div>
            {% else %}
                <p class="text-gray-500 text-sm">Nenhuma beneficiÃ¡ria cadastrada ainda.</p>
                <div class="mt-4">
                    <a href="{% url 'dashboard:beneficiary_create' %}" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-move hover:bg-purple-700">
                        Cadastrar primeira beneficiÃ¡ria
                    </a>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Oficinas Recentes -->
    <div class="bg-white shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Oficinas Recentes</h3>
            {% if recent_workshops %}
                <div class="space-y-3">
                    {% for workshop in recent_workshops %}
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex-1">
                            <p class="text-sm font-medium text-gray-900">{{ workshop.name }}</p>
                            <p class="text-xs text-gray-500">
                                {{ workshop.facilitator }} â€¢ {{ workshop.get_workshop_type_display }}
                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ml-2
                                    {% if workshop.status == 'ativo' %}bg-green-100 text-green-800
                                    {% elif workshop.status == 'planejamento' %}bg-yellow-100 text-yellow-800
                                    {% elif workshop.status == 'pausado' %}bg-orange-100 text-orange-800
                                    {% elif workshop.status == 'concluido' %}bg-blue-100 text-blue-800
                                    {% else %}bg-red-100 text-red-800
                                    {% endif %}">
                                    {{ workshop.get_status_display }}
                                </span>
                            </p>
                            <p class="text-xs text-gray-400 mt-1">
                                {{ workshop.total_participants }}/{{ workshop.max_participants }} participantes
                            </p>
                        </div>
                        <a href="{% url 'workshops:workshop_detail' workshop.pk %}" 
                           class="text-purple-move hover:text-purple-700 text-sm font-medium">
                            Ver
                        </a>
                    </div>
                    {% endfor %}
                </div>
                <div class="mt-4">
                    <a href="{% url 'workshops:workshop_list' %}" class="text-sm font-medium text-purple-move hover:text-purple-700">
                        Ver todas as oficinas â†’
                    </a>
                </div>
            {% else %}
                <p class="text-gray-500 text-sm">Nenhuma oficina cadastrada ainda.</p>
                <div class="mt-4">
                    <a href="{% url 'workshops:workshop_create' %}" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-move hover:bg-purple-700">
                        Criar primeira oficina
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<div class="mt-8">
    <!-- AÃ§Ãµes RÃ¡pidas -->
    <div class="bg-white shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">AÃ§Ãµes RÃ¡pidas</h3>
            <div class="space-y-3">
                <a href="{% url 'dashboard:beneficiary_create' %}" 
                   class="block w-full text-left px-4 py-3 bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors">
                    <div class="flex items-center">
                        <span class="text-purple-move text-lg mr-3">ðŸ‘¤</span>
                        <div>
                            <p class="text-sm font-medium text-gray-900">Nova BeneficiÃ¡ria</p>
                            <p class="text-xs text-gray-500">Cadastrar nova beneficiÃ¡ria no sistema</p>
                        </div>
                    </div>
                </a>
                
                <a href="{% url 'social:anamnesis_create' %}" class="block w-full text-left px-4 py-3 bg-pink-50 border border-pink-200 rounded-lg hover:bg-pink-100 transition-colors">
                    <div class="flex items-center">
                        <span class="text-pink-move text-lg mr-3">ðŸ“‹</span>
                        <div>
                            <p class="text-sm font-medium text-gray-900">Nova Anamnese</p>
                            <p class="text-xs text-gray-500">Criar anamnese social</p>
                        </div>
                    </div>
                </a>
                
                <a href="{% url 'projects:enrollment-create' %}" class="block w-full text-left px-4 py-3 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors">
                    <div class="flex items-center">
                        <span class="text-green-500 text-lg mr-3">ðŸŽ¯</span>
                        <div>
                            <p class="text-sm font-medium text-gray-900">Novo Projeto</p>
                            <p class="text-xs text-gray-500">Matricular em projeto</p>
                        </div>
                    </div>
                </a>
                
                <a href="{% url 'evolution:create' %}" class="block w-full text-left px-4 py-3 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors">
                    <div class="flex items-center">
                        <span class="text-blue-500 text-lg mr-3">ðŸ“ˆ</span>
                        <div>
                            <p class="text-sm font-medium text-gray-900">Registro de EvoluÃ§Ã£o</p>
                            <p class="text-xs text-gray-500">Documentar progresso</p>
                        </div>
                    </div>
                </a>
                
                <a href="{% url 'coaching:action_plan_create' %}" class="block w-full text-left px-4 py-3 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 transition-colors">
                    <div class="flex items-center">
                        <span class="text-yellow-500 text-lg mr-3">ðŸ“‹</span>
                        <div>
                            <p class="text-sm font-medium text-gray-900">Plano de AÃ§Ã£o</p>
                            <p class="text-xs text-gray-500">Criar plano de coaching</p>
                        </div>
                    </div>
                </a>
                
                <a href="{% url 'workshops:workshop_create' %}" class="block w-full text-left px-4 py-3 bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors">
                    <div class="flex items-center">
                        <span class="text-purple-500 text-lg mr-3">ðŸŽ¨</span>
                        <div>
                            <p class="text-sm font-medium text-gray-900">Nova Oficina</p>
                            <p class="text-xs text-gray-500">Criar nova oficina</p>
                        </div>
                    </div>
                </a>
                
                <a href="{% url 'coaching:wheel_create' %}" class="block w-full text-left px-4 py-3 bg-indigo-50 border border-indigo-200 rounded-lg hover:bg-indigo-100 transition-colors">
                    <div class="flex items-center">
                        <span class="text-indigo-500 text-lg mr-3">â­•</span>
                        <div>
                            <p class="text-sm font-medium text-gray-900">Roda da Vida</p>
                            <p class="text-xs text-gray-500">Avaliar Ã¡reas da vida</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
