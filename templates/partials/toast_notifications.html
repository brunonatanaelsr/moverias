<!-- Toast Notifications Component -->
<div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2">
    <!-- Success Toast -->
    <div class="hidden bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-3 transform transition-all duration-300 translate-x-full" 
         id="success-toast-template">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <span class="toast-message">Operação realizada com sucesso!</span>
        <button class="ml-4 text-green-200 hover:text-white" onclick="closeToast(this)">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
    </div>

    <!-- Error Toast -->
    <div class="hidden bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-3 transform transition-all duration-300 translate-x-full" 
         id="error-toast-template">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <span class="toast-message">Erro ao realizar operação!</span>
        <button class="ml-4 text-red-200 hover:text-white" onclick="closeToast(this)">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
    </div>

    <!-- Warning Toast -->
    <div class="hidden bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-3 transform transition-all duration-300 translate-x-full" 
         id="warning-toast-template">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
        </svg>
        <span class="toast-message">Atenção necessária!</span>
        <button class="ml-4 text-yellow-200 hover:text-white" onclick="closeToast(this)">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
    </div>

    <!-- Info Toast -->
    <div class="hidden bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-3 transform transition-all duration-300 translate-x-full" 
         id="info-toast-template">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <span class="toast-message">Informação importante</span>
        <button class="ml-4 text-blue-200 hover:text-white" onclick="closeToast(this)">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>
    </div>
</div>

<script>
function showToast(type, message) {
    const container = document.getElementById('toast-container');
    const template = document.getElementById(type + '-toast-template');
    
    if (!template) return;
    
    const toast = template.cloneNode(true);
    toast.id = 'toast-' + Date.now();
    toast.classList.remove('hidden', 'translate-x-full');
    toast.querySelector('.toast-message').textContent = message;
    
    container.appendChild(toast);
    
    // Animate in
    setTimeout(() => {
        toast.classList.add('translate-x-0');
    }, 10);
    
    // Auto close after 5 seconds
    setTimeout(() => {
        closeToast(toast.querySelector('button'));
    }, 5000);
}

function closeToast(button) {
    const toast = button.closest('[id^="toast-"]');
    toast.classList.add('translate-x-full');
    
    setTimeout(() => {
        toast.remove();
    }, 300);
}

// Listen for HTMX events to show toasts
document.addEventListener('htmx:afterRequest', function(event) {
    const response = event.detail.xhr.responseText;
    
    if (event.detail.xhr.status >= 200 && event.detail.xhr.status < 300) {
        // Success
        if (response.includes('success')) {
            showToast('success', 'Operação realizada com sucesso!');
        }
    } else {
        // Error
        showToast('error', 'Erro ao realizar operação. Tente novamente.');
    }
});
</script>
