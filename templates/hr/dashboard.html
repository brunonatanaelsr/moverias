{% extends "hr/base.html" %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="h3 mb-0">Dashboard de Recursos Humanos</h1>
            <p class="text-muted">Visão geral dos funcionários e atividades de RH</p>
        </div>
    </div>

    <!-- Cards de Estatísticas -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card hr-card border-left-primary">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                Funcionários Ativos
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ total_employees }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card hr-card border-left-success">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                Departamentos
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ total_departments }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-building fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card hr-card border-left-info">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                Contratações (30 dias)
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ recent_hires }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-user-plus fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card hr-card border-left-warning">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                Avaliações Pendentes
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">{{ pending_reviews }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-clipboard-check fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ações Rápidas -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card hr-card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-bolt text-warning me-2"></i>
                        Ações Rápidas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <a href="{% url 'hr:employee_create' %}" class="btn btn-outline-primary w-100">
                                <i class="fas fa-user-plus"></i><br>
                                <small>Novo Funcionário</small>
                            </a>
                        </div>
                        <div class="col-md-3 mb-3">
                            <a href="{% url 'hr:employee_list' %}" class="btn btn-outline-info w-100">
                                <i class="fas fa-users"></i><br>
                                <small>Listar Funcionários</small>
                            </a>
                        </div>
                        <div class="col-md-3 mb-3">
                            <a href="{% url 'hr:performance_reviews' %}" class="btn btn-outline-warning w-100">
                                <i class="fas fa-star"></i><br>
                                <small>Avaliações</small>
                            </a>
                        </div>
                        <div class="col-md-3 mb-3">
                            <a href="{% url 'hr:reports_dashboard' %}" class="btn btn-outline-success w-100">
                                <i class="fas fa-chart-bar"></i><br>
                                <small>Relatórios</small>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Lembretes e Notificações -->
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card hr-card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-bell text-info me-2"></i>
                        Lembretes
                    </h5>
                </div>
                <div class="card-body">
                    {% if pending_reviews > 0 %}
                        <div class="alert alert-warning">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            Existem {{ pending_reviews }} avaliação{{ pending_reviews|pluralize:"ões" }} de desempenho pendente{{ pending_reviews|pluralize }}
                        </div>
                    {% endif %}
                    
                    {% if upcoming_trainings > 0 %}
                        <div class="alert alert-info">
                            <i class="fas fa-calendar-alt me-2"></i>
                            {{ upcoming_trainings }} treinamento{{ upcoming_trainings|pluralize }} agendado{{ upcoming_trainings|pluralize }} para os próximos dias
                        </div>
                    {% endif %}
                    
                    {% if recent_hires > 0 %}
                        <div class="alert alert-success">
                            <i class="fas fa-user-check me-2"></i>
                            {{ recent_hires }} novo{{ recent_hires|pluralize }} funcionário{{ recent_hires|pluralize }} contratado{{ recent_hires|pluralize }} nos últimos 30 dias
                        </div>
                    {% endif %}
                    
                    {% if pending_reviews == 0 and upcoming_trainings == 0 and recent_hires == 0 %}
                        <p class="text-muted mb-0">
                            <i class="fas fa-check-circle text-success me-2"></i>
                            Nenhum lembrete no momento
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-4">
            <div class="card hr-card">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-tasks text-primary me-2"></i>
                        Tarefas Recentes
                    </h5>
                </div>
                <div class="card-body">
                    <div class="timeline">
                        <!-- Este seria populado com dados reais em uma implementação completa -->
                        <div class="timeline-item">
                            <div class="timeline-marker bg-primary"></div>
                            <div class="timeline-content">
                                <h6 class="mb-1">Sistema RH implementado</h6>
                                <p class="text-muted small mb-0">Módulo completo de RH adicionado ao sistema</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.border-left-primary {
    border-left: 0.25rem solid #4e73df!important;
}

.border-left-success {
    border-left: 0.25rem solid #1cc88a!important;
}

.border-left-info {
    border-left: 0.25rem solid #36b9cc!important;
}

.border-left-warning {
    border-left: 0.25rem solid #f6c23e!important;
}

.timeline {
    position: relative;
    padding-left: 1.5rem;
}

.timeline-item {
    position: relative;
    padding-bottom: 1rem;
}

.timeline-marker {
    position: absolute;
    left: -1.75rem;
    top: 0.25rem;
    width: 0.75rem;
    height: 0.75rem;
    border-radius: 50%;
}

.timeline::before {
    content: '';
    position: absolute;
    left: -1.375rem;
    top: 0;
    bottom: 0;
    width: 2px;
    background: #e3e6f0;
}
</style>
{% endblock %}
