{% extends "base_optimized.html" %}

{% block title %}Teste CSRF{% endblock %}

{% block extra_css %}
<style>
    /* Dashboard specific animations */
    .dashboard-fade-in {
        animation: fadeIn 0.4s ease-out;
    }
    
    .dashboard-slide-up {
        animation: slideUp 0.5s ease-out;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    @keyframes slideUp {
        from { 
            opacity: 0;
            transform: translateY(15px);
        }
        to { 
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    /* Hover effects */
    .dashboard-card-hover:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.1);
    }
</style>
{% endblock %}

{% block breadcrumb_items %}
<!-- Add breadcrumb items here if needed -->
{% endblock %}

{% block content %}
<div class="dashboard-container-optimized">
<div class="bg-white rounded-lg shadow p-6">
        <h1 class="text-2xl font-bold mb-6">Teste de CSRF</h1>
        
        <div class="space-y-6">
            <!-- Info do CSRF -->
            <div class="bg-blue-50 p-4 rounded-lg">
                <h3 class="font-semibold mb-2">Informações do CSRF:</h3>
                <p><strong>CSRF Token:</strong> {{ csrf_token }}</p>
                <p><strong>CSRF Token Value:</strong> {{ csrf_token_value }}</p>
                <p><strong>User:</strong> {{ user.username|default:"Anônimo" }}</p>
            </div>
            
            <!-- Formulário de Teste -->
            <form method="post" class="space-y-4">
                {% csrf_token %}
                <div>
                    <label for="test_field" class="block text-sm font-medium text-gray-700 mb-1">
                        Campo de Teste
                    </label>
                    <input type="text" 
                           id="test_field" 
                           name="test_field" 
                           value="{{ request.POST.test_field|default:'' }}"
                           class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
                </div>
                
                <button type="submit" 
                        class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">
                    Testar CSRF
                </button>
            </form>
            
            {% if request.method == 'POST' %}
            <div class="bg-green-50 p-4 rounded-lg">
                <h3 class="font-semibold text-green-800 mb-2">✅ POST realizado com sucesso!</h3>
                <p class="text-green-700">Valor enviado: {{ request.POST.test_field|default:"(vazio)" }}</p>
                <p class="text-green-700">CSRF funcionando corretamente!</p>
            </div>
            {% endif %}
            
            <!-- Instruções -->
            <div class="bg-yellow-50 p-4 rounded-lg">
                <h3 class="font-semibold text-yellow-800 mb-2">Instruções:</h3>
                <ol class="text-yellow-700 list-decimal list-inside space-y-1">
                    <li>Preencha o campo e clique em "Testar CSRF"</li>
                    <li>Se aparecer uma mensagem verde, o CSRF está funcionando</li>
                    <li>Se der erro 403, ainda há problemas</li>
                    <li>Limpe os cookies do navegador se necessário</li>
                </ol>
            </div>
        </div>
    </div>
</div>
</div>
{% endblock %}
